---
export const prerender = false;

import MainWeatherDisplay from "../components/MainWeatherDisplay.astro";
import WeatherDisplay from "../components/WeatherDisplay.astro";
import Layout from "../layouts/Layout.astro";

const location = Astro.url.searchParams.get("location") || "Stockholm";
const res = await fetch(
  `${Astro.url.origin}/api/weather?location=${location}`
).then(async (r) => await r.json());
---

<Layout>
  <MainWeatherDisplay weatherData={res} />
  <WeatherDisplay weatherData={res} />
</Layout>
